<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
	</head>
	<body>
		<script>
		//接口地址: https://api.apiopen.top/getJoke
		const p = new Promise((resolve,reject)=>{
			
		//创建对象
		const xhr = new XMLHttpRequest();
		//初始化
		xhr.open("GET","https://api.apiopen.top/getJoke");
		//发送
		xhr.send();
		//绑定事件，处理响应结果
		xhr.onreadystatechange =  function(){
			//判断
			if(xhr.readyState === 4){	// 等于4说明了所有的响应体都已经回来了
				//判断响应状态码 200-299
				if (xhr.status >=200 && xhr.status < 300){
					//表示成功
					resolve(xhr.response);
				}else{
					//如果失败
					reject(xhr.status);
				}
			}
		}
		})
		//指定回调
		p.then(function(value){
			console.log(value);
		},function(reason){
			console.error(reason);
		});
		</script>
	</body>
</html>
